{% extends "base.html" %}
{% load static %}

{% block css %}

    <link rel="stylesheet" type="text/css" href="{% static 'css/item.css' %}">

{% endblock %}


{% block title %}
    <title>Spartan-helmet | {{ item.name }}</title>
{% endblock %}

{% block content %}

    <div class="row">
            <h3 class="col-md-4 offset-4" style="text-align: center">{{ item.name }}</h3>
            {% if user.is_superuser %}
                <a href="{% url "remove_item" item.name %}" class="col-md-2 offset-1 btn btn-outline-danger" type="button">Удалить товар</a>
            {% endif %}
    </div>

    <div class="row m-0">
        <div class="item_images_div col-md-4 offset-1" style="margin-top: 2%">
            <img id="item_cover" class="item_images" style="width:100%" src="{{ item.main_image.url }}" alt="{{ item.name }}">
            <div class="row" style="margin-top: 2%">
                {% for image in images %}
                    <img class="col-md-3 item_images" src="{{ image.image.url }}" alt="{{ image.caption }}">
                {% endfor %}
            </div>
        </div>
        <div class="item_info col-md-6" style="margin-top: 2%">
            <p>{{ item.description }}</p>
            <!--<p>Price: {{ item.price }}</p>
            <button type="button" class="btn btn-outline-danger">Add to cart</button>-->
            <p class="price">Price: {{ item.price }}$</p>
            <form action="{% url "cart_add" item.id %}" method="post">
                {{ cart_product_form }}
                {% csrf_token %}
                <input type="submit" class="btn btn-outline-danger" value="Add to cart">
            </form>
        </div>
    </div>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01" alt="img01">
        <div id="caption"></div>
    </div>

    <script type="text/javascript">
        let modal = document.getElementById("myModal");
        let img = document.getElementById("item_cover");
        let  modalImg = document.getElementById("img01");
        let captionText = document.getElementById("caption");
        let all_images = document.getElementsByClassName("item_images")

        for (let i = 0; i < all_images.length; i++) {
            all_images.item(i).onclick = function() {
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = this.alt;
            }
        }

        let span = document.getElementsByClassName("close")[0];



        span.onclick = function() {
            modal.style.display = "none";
        }

    </script>

{% endblock %}